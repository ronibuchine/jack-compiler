class Main {  

   function void clear() {
      do Screen.clearScreen();
      return;
   }

   function void setup(Bird bird, Array pipes, int numPipes) {
      // unimplemented
      let step = 40;
      let bird = Bird.new(75, 100, 30);
      let pipes = Array.new(numPipes);
      return;
   }

   function void pipeShift(Array pipes, int numPipes) {
      if (pipes[0].getX() - Pipe.getStep() < 0) {
         var int i;
         var Pipe temp;
         var Random rand;

         let rand = Random.new();
         let i = 1;
         let temp = pipes[0]; // store the first pipe to be disposed

         while (i < numPipes) {
            let pipes[i-1] = pipes[i];
            let i = i + 1; 
         }
         // create new pipe off screen to the right
         let pipes[numPipes-1] = Pipe.new(600, rand.generate(42));
         do temp.dispose();
         do rand.dispose();
      }
      return;
   }

   function void move(Bird bird, Array pipes, int numPipes) {
      // move all geos
      do bird.move()
      while (i < numPipes) {
         do pipes[i].move();
         let i = i + 1;
      }
      do pipeShift(pipes);
      return;
   }

   function void draw(Bird bird, Array pipes, int numPipes) {
      // draw all geos
      do bird.draw()
      while (i < numPipes) {
         do pipes[i].draw();
         let i = i + 1;
      }
      do pipeShift(pipes);
      return;
   }

   function bool checkCollisions(Bird bird, Array pipes) {
      // if the bird collides with a pipe return true
      // unimplemented
      return true;
   }

   function bool checkPipeCleared(Bird bird, Array pipes) {
      // if the bird cleared a pipe return true
      // unimplemented
      return true;
   }


   function void main() {
      
      var Array pipes;
      var Bird bird;
      var int step, numPipes, score;
      var bool alive;

      let alive = true;
      let numPipes = 6;
      let score = 0;
      do setup(bird, pipes, numPipes);
      
      while (alive) {        
         
         // each frame move all elements on the screen and check for collisions
         if (checkCollisions(bird, pipes)) {
            let alive = false;
         }
         do draw(bird, pipes, numPipes);




         if (checkPipeCleared(bird, pipes)) {
            let score = score + 1;
         }
         do clear();
         do move(bird, pipes, numPipes);
      }
      do pipes.dispose();
      do bird.dispose();
      return;
   }
}